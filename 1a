1) добавляем инфоблок "Акции" 
2) добавляем в него элемент с правилами акции. Что бы не плодить лишних свойств для хранения условий будем использовать детальный текст (новая цена) и текст анонса (на какие элементы скидка). Также, будем устанавливать период активности акции через период активности элемента
3) в файле init.php делаем обработчик корзины на события OnBasketAdd, OnBasketUpdate и OnBasketDelete
4) в обработчике получаем активный элемент из ИБ "Акции" - если такой имеется, идем дальше.
5) получаем корзину со всеми элементами и их количеством отсортированную по PRICE=>ASC
6) проверяем условия - все элементы * количество / параметр акции. Округляем в меньшую сторону - получаем количество элементов, которые попадают под акцию.
7) делаем рекурсивную функцию и получаем массив товаров с учетом количества каждого товара в корзине. Например, в корзине есть товар А - 2шт, товар Б -1шт и и товар В - 3шт. На выходе имеем массив: 
Array( Товар А, Товар А, Товар Б, Товар В, Товар В, Товар В );
7) Применяем правило и делаем CSaleBasket::Update
